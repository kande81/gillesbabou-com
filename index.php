<?php
    include('partials/header.php');
?>

    <div class="main" id="home">
      <div class="slider-buttons" id="left">
        <svg
          class="slider-buttons__svg"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 15 25.719"
        >
          <path
            id="angle-left-solid"
            d="M32.653,75.271a2.146,2.146,0,0,0,0,3.033L43.365,89.016A2.145,2.145,0,1,0,46.4,85.983l-9.2-9.2,9.192-9.2a2.145,2.145,0,1,0-3.033-3.033L32.646,75.265Z"
            transform="translate(-32.025 -63.925)"
          />
        </svg>
      </div>
      <!-- <img
        src="icons/angle-left-solid.svg"
        class="slider-buttons"
        id="left"
        alt="previous button"
      /> -->

      <div class="image-con">
        <div class="image-con__images">
          <img
            class="image-slides"
            data-title="flowers in the city"
            data-number="1"
            src="images/flowers-in-the-city_web_1500_6x4.jpg"
            alt=""
            data-hires_width="2592"
            data-hires_height="1944"
          />
          <img
            class="image-slides"
            data-title="bible study"
            data-number="2"
            src="images/bible study-web-1500-6x4.jpg"
            alt=""
            data-hires_width="4272"
            data-hires_height="2848"
          />
          <img
            class="image-slides"
            data-title="bird lady"
            data-number="3"
            src="images/bird-lady-web-1500-6x4.jpg"
            alt=""
            data-hires_width="4272"
            data-hires_height="2848"
          />
          <img
            class="image-slides"
            data-title="birthday boy"
            data-number="4"
            src="images/birthday-boy-web-1500-6x4.jpg"
            alt=""
            data-hires_width="4272"
            data-hires_height="2848"
          />
          <img
            class="image-slides"
            data-title="dancing queen"
            data-number="5"
            src="images/Dancing-queen-in-venice-web-1500-6x4.jpg"
            alt=""
            data-hires_width="4272"
            data-hires_height="2848"
          />
          <img
            class="image-slides"
            data-title="father and daughter"
            data-number="6"
            src="images/father-and-daughter-web-1500-6x4.jpg"
            alt=""
            data-hires_width="4272"
            data-hires_height="2848"
          />
          <img
            class="image-slides"
            data-title="girls love a man in uniform"
            data-number="7"
            src="images/Girls-love-a-man-in-uniform-web-1500-6x4.jpg"
            alt=""
            data-hires_width="2560"
            data-hires_height="1920"
          />
          <img
            class="image-slides"
            data-title="hapiness in venice"
            data-number="8"
            src="images/happiness-in-venice-web-1500-6x4.jpg"
            alt=""
            data-hires_width="4272"
            data-hires_height="2848"
          />
          <img
            class="image-slides"
            data-title="inside the venice beach drum circle"
            data-number="9"
            src="images/inside-the-venice-beach-drum-circle-6-web-1500-6x4.jpg"
            alt=""
            data-hires_width="4272"
            data-hires_height="2848"
          />
          <img
            class="image-slides"
            data-title="the red dress"
            data-number="10"
            src="images/The-red-dress-in-the-circle-web-1500-6x4.jpg"
            alt=""
            data-hires_width="4272"
            data-hires_height="2848"
          />
          <img
            class="image-slides"
            data-title="trance in venice"
            data-number="11"
            src="images/Trance-in-venice-2-web-1500-6x4.jpg"
            alt=""
            data-hires_width="4272"
            data-hires_height="2848"
          />
          <img
            class="image-slides"
            data-title="love behind bars"
            data-number="12"
            src="images/love-behind bars-web-1500-6x4.jpg"
            alt=""
            data-hires_width="4272"
            data-hires_height="2848"
          />
          <img
            class="image-slides"
            data-title="more than a game"
            data-number="13"
            src="images/more-than-a game-2-web-1500-6x4.jpg"
            alt=""
            data-hires_width="4272"
            data-hires_height="2848"
          />
          <img
            class="image-slides"
            data-title="pre kiss faces"
            data-number="14"
            src="images/pre-kiss-faces-web-1500-6x4.jpg"
            alt=""
            data-hires_width="4272"
            data-hires_height="2848"
          />
          <img
            class="image-slides"
            data-title="the kiss"
            data-number="15"
            src="images/the-kiss-web-1500-6x4.jpg"
            alt=""
            data-hires_width="4272"
            data-hires_height="2848"
          />
          <img
            class="image-slides"
            data-title="spring st dtla"
            data-number="16"
            src="images/spring-st-dtla-web-1500-6x4.jpg"
            alt=""
            data-hires_width="4272"
            data-hires_height="2848"
          />
          <img
            class="image-slides"
            data-title="street games"
            data-number="17"
            src="images/street-games-web-1500-6x4.jpg"
            alt=""
            data-hires_width="4272"
            data-hires_height="2848"
          />
          <img
            class="image-slides"
            data-title="the dice game"
            data-number="18"
            src="images/the-dice-game_web_1500_6x4.jpg"
            alt=""
            data-hires_width="2592"
            data-hires_height="1944"
          />
          <img
            class="image-slides"
            data-title="the flag"
            data-number="19"
            src="images/the-flag-web-1500-6x4.jpg"
            alt=""
            data-hires_width="4272"
            data-hires_height="2848"
          />
          <img
            class="image-slides"
            data-title="the geisha"
            data-number="20"
            src="images/the-geisha_web_1500_6x4.jpg"
            alt=""
            data-hires_width="4272"
            data-hires_height="2848"
          />
        </div>
      </div>
      <!-- <img
        src="icons/angle-right-solid.svg"
        class="slider-buttons"
        id="right"
        alt="next button"
      /> -->

      <div class="slider-buttons" id="right">
        <svg
          class="slider-buttons__svg"
          xmlns="http://www.w3.org/2000/svg"
          width="11.94"
          viewBox="0 0 15 25.719"
        >
          <path
            id="angle-right-solid"
            d="M78.3,75.271a2.146,2.146,0,0,1,0,3.033L67.585,89.016a2.145,2.145,0,0,1-3.033-3.033l9.2-9.2-9.192-9.2a2.145,2.145,0,0,1,3.033-3.033L78.3,75.265Z"
            transform="translate(-63.925 -63.925)"
          />
        </svg>
      </div>

      <div class="caption">
        <p class="image-title"></p>
        <div class="image-counter">
          <span class="image-num"></span>
          <span class="bar" style="display: inline-block">/</span>
          <span class="image-total" style="display: inline-block"></span>
        </div>
      </div>
      <div class="btn-cont">
        <button name="buy prints" class="buy-btn">Buy Print</button>
      </div>
    </div>
    <script
      type="text/javascript"
      src="//widget.fotomoto.com/stores/script/f1632ee338083f14ecf5f0b9e47fc55370b192e3.js?api=true"
    ></script>
    <noscript
      >If Javascript is disabled in your browser, to place orders please visit
      the page where I
      <a
        href=" https://my.fotomoto.com/store/f1632ee338083f14ecf5f0b9e47fc55370b192e3"
        >sell my photos</a
      >, powered by <a href="https://my.fotomoto.com">Fotomoto</a>.</noscript
    >

    <script>
      // const leftbtn = document.querySelector("#left");
      // const rightbtn = document.querySelector("#right");

      let bar = document.querySelector(".bar");
      const imageBox = document.querySelector(".image-con__images");

      // console.log("width", imageContainer.clientWidth);
      const images = document.querySelectorAll(".image-slides");
      console.log(images[0].dataset.title);
      const caption = document.querySelector(".caption");
      let captionTitle = caption.querySelector(".image-title");
      const numberOfImages = images.length;
      let imageNum = document.querySelector(".image-num");
      const imageTotal = document.querySelector(".image-total");
      imageTotal.innerHTML = numberOfImages;
      let index = 0;
      // let preScroll = 0;
      // let scroll = 0;
      // let step = 0;

      captionTitle.innerHTML = images[0].dataset.title;
      imageNum.innerHTML = images[0].dataset.number;
      // imageNum.style.animation = "num-anim 2s ease-in-out";

      function captionAnimation() {
        bar.style.animation = "bar-spin 0.5s ease-in-out";
        captionTitle.style.animation = "title-fade 1.5s ease-in-out";
        imageNum.style.animation = "title-fade 1.5s ease-in-out";
      }

      function removeAnimation() {
        captionTitle.style.animation = "";

        imageNum.style.animation = "";

        bar.style.animation = "";
      }

      //code for sliding images with touch
      // imageContainer.addEventListener("touchend", (e) => {
      //   removeAnimation();

      //   setTimeout(() => {
      //     scroll = imageContainer.scrollLeft;

      //     if (scroll == preScroll) return;
      //     step = Math.round((scroll - preScroll) / containerWidth);
      //     index = index + step;
      //     captionAnimation();
      //     captionTitle.innerHTML = images[index].dataset.title;
      //     imageNum.innerHTML = images[index].dataset.number;
      //     preScroll = scroll;
      //   }, 800);
      // });

      //code for sliding images with buttons
      let translateX = 0;
      const leftBtn = document.querySelector("#left");
      const rightBtn = document.querySelector("#right");
      leftBtn.style.pointerEvents = "none";

      const buttons = document.querySelectorAll(".slider-buttons");


      buttons.forEach((button) => {
        button.addEventListener("click", (e) => {
          e.stopPropagation();
          console.log(e.target.id);
          if (navigator.vibrate) {
            navigator.vibrate(7);
          }
          removeAnimation();
          const imageContainer = document.querySelector(".image-con");
          const containerWidth = imageContainer.clientWidth;

          console.log("width", containerWidth);
          if (e.target.id === "left") {
            //this let us know how to slide the images. If the button cliked was previous then we know we want to slide to the right
            if (index !== 0) {
              // check if we're not on first image
              index--; //
              translateX += containerWidth;
              captionAnimation();
              captionTitle.innerHTML = images[index].dataset.title;
              imageNum.innerHTML = images[index].dataset.number;
              if (index === 0) {
                leftBtn.style.pointerEvents = "none";
              }
              rightBtn.style.pointerEvents = "auto";
            }
          } else if (e.target.id === "right") {
            // else if next button
            if (index !== numberOfImages - 1) {
              // check to see if we are at the last image
              index++;
              translateX -= containerWidth;
              captionAnimation();
              captionTitle.innerHTML = images[index].dataset.title;
              imageNum.innerHTML = images[index].dataset.number;
              leftBtn.style.pointerEvents = "auto";

              if (index === numberOfImages - 1) {
                rightBtn.style.pointerEvents = "none";
              }
            }
          }
          // debugger;
          imageBox.style.transform = `translateX(${translateX}px)`;
        });
      });
      const buyBtn = document.querySelector(".buy-btn");
      buyBtn.addEventListener("click", (e) => {
        FOTOMOTO.API.showWindow(FOTOMOTO.API.PRINT, `${images[index].src}`);
      });

      window.addEventListener("resize" , (e) => {


        if (!imageBox.style.transform || imageBox.style.transform === "translateX(0px)") return;
        const imageContainer = document.querySelector(".image-con");
          const containerWidth = imageContainer.clientWidth;

        translateX = -containerWidth * index;
        imageBox.style.transform = `translateX(${translateX}px)`;
        console.log("width resize after", containerWidth);

      })
      // end of code for sliding images with buttons

      // const widthOfContainer = imageContainer.getBoundingClientRect().width;
      // let changeInMouse = 0;

      // let isDown = false;
      // let startX;
      // let scrollLeft;

      // imageContainer.addEventListener("mousedown", (e) => {
      //   isDown = true;
      //   // get the x position of the mouse when the mouse is clicked
      //   startX = e.pageX;
      //   // get the current scroll position of the image container
      //   scrollLeft = imageContainer.scrollLeft;
      // });

      // imageContainer.addEventListener("mouseleave", () => {
      //   isDown = false;
      //   // imageContainer.classList.remove('active');
      // });

      // imageContainer.addEventListener("mouseup", () => {
      //   isDown = false;
      //   // if mouse was dragged to the right then images move back else images move forward
      //   if (changeInMouse > 0) {
      //     imageContainer.scrollLeft = scrollLeft - widthOfContainer;
      //   } else {
      //     imageContainer.scrollLeft = scrollLeft + widthOfContainer;
      //   }
      // });

      // imageContainer.addEventListener("mousemove", (e) => {
      //   if (!isDown) return; // stop the fn from running
      //   e.preventDefault();
      //   // get the change in mouse position
      //   changeInMouse = e.movementX;
      //   // scroll the image container by the current scroll position minus the change in mouse position
      //   // console.log(e.pageX);
      //   imageContainer.scrollLeft = scrollLeft - (e.pageX - startX);
      //   console.log("scrollLeft", imageContainer.scrollLeft);
      // });
    </script>
    <?php include('partials/footer.php'); ?>
